<!-- Registration Modal -->
<div id="registrationModal" class="modal">
    <div class="bg-white p-5 rounded-lg shadow-lg w-1/3">
        <h2 class="text-xl font-bold mb-4">Register Employee</h2>
        <form id="registerForm">
            <div class="mb-4">
                <label for="employeeName" class="block text-sm font-medium">Employee Name</label>
                <input type="text" id="employeeName" class="border rounded w-full p-2" placeholder="Enter employee name" required>
            </div>
            <div class="mb-4">
                <label for="employeeId" class="block text-sm font-medium">Employee ID</label>
                <input type="text" id="employeeId" class="border rounded w-full p-2" placeholder="Enter employee ID" required>
            </div>
            <button type="button" onclick="startCamera()" class="bg-yellow-400 text-white py-2 px-4 rounded-lg">Start Camera</button>
            <button type="button" id="cancelBtn" class="bg-red-500 text-white py-2 px-4 rounded-lg mt-2">Cancel</button>
        </form>
    </div>
</div>
</div>
<div class="text-center mt-5 text-sm text-gray-600">
<p>
 Copyright Â©2025 &amp; Developed by
 <a class="text-red-500 hover:underline" href="#">
  Eframe Pvt. Ltd.
 </a>
</p>
</div>
</div>

<!-- JavaScript -->
<script>
    const addNewBtn = document.getElementById('addNewBtn');
    const registrationModal = document.getElementById('registrationModal');
    const cancelBtn = document.getElementById('cancelBtn');

    // Open the modal when "Add New" is clicked
    addNewBtn.addEventListener('click', () => {
        registrationModal.classList.add('active');
    });

    // Close the modal when "Cancel" is clicked
    cancelBtn.addEventListener('click', () => {
        registrationModal.classList.remove('active');
    });

    function startCamera() {
        const employeeId = document.getElementById('employeeId').value.trim();
        const employeeName = document.getElementById('employeeName').value.trim();

        if (!employeeId || !employeeName) {
            alert('Please enter both Employee ID and Employee Name before starting the camera.');
            return;
        }

        const url = `/capture_face/${employeeId}/${encodeURIComponent(employeeName)}`;
        console.log("Making request to:", url);

        fetch(url, { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                alert('Face capture completed successfully.');
                registrationModal.classList.remove('active');
            } else {
                alert(data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while starting the camera.');
        });
    }

    function navigateTo(url) {
        window.location.href = url;
    }
</script>
</body>
</html>
